#language: ru

@tree

Функционал: проверка документа РасходТовара

Как Тестировщик я хочу
протестировать документ РасходТовара,включая проведение по регистрам ,печатную форму 
чтобы исключить ошибки пользователей при работе с данными документом   

Контекст:
	Дано Я запускаю сценарий открытия TestClient или подключаю уже существующий

Сценарий: проверка документа РасходТовара
* Открытие документа РасходТовара
		Дано Я открываю навигационную ссылку "e1cib/data/Document.ShipmentConfirmation?ref=8ed200155d02c60011ef2181dbe705ca"
* Проверка доступности элементов форм
		И элемент формы "Организация" присутствует на форме
		И элемент формы "Партнер" присутствует на форме
		И элемент формы "Операция" присутствует на форме
		И элемент формы "Контрагент" присутствует на форме
		И элемент формы "Склад" присутствует на форме
		И я перехожу к закладке с именем "GroupOther"
		И элемент формы "Номер" присутствует на форме
		И элемент формы "Дата" присутствует на форме
		И элемент формы "Автор" присутствует на форме
		И элемент формы "Структурное подразделение" присутствует на форме
		И я закрываю все окна клиентского приложения
		
Сценарий: проверка заполнения полей в документе РасходТовара
	* Открытие документа РасходТовара
		Дано Я открываю навигационную ссылку "e1cib/data/Document.ShipmentConfirmation?ref=8ed200155d02c60011ef2181dbe705ca"
	* Проверка заполнения полей в проведенном документе РасходТовара
		Тогда элемент формы с именем "Author" стал равен 'CI'
		И элемент формы с именем "Branch" стал равен ''
		И элемент формы с именем "Company" стал равен 'Собственная компания 1'
		И элемент формы с именем "Date" стал равен '03.06.2024 11:18:33'
		И элемент формы с именем "DecorationGroupTitleCollapsedLabel" стал равен 'Дата: 3 июня 2024 г. 11:18:33   Номер: 7   Организация: Собственная компания 1   Партнер: Розничный покупатель   Контрагент: Розничный покупатель   '
		И элемент формы с именем "DecorationGroupTitleCollapsedPicture" стал равен 'Сворачиваемая группа формы'
		И элемент формы с именем "DecorationGroupTitleUncollapsedLabel" стал равен 'Дата: 3 июня 2024 г. 11:18:33   Номер: 7   Организация: Собственная компания 1   Партнер: Розничный покупатель   Контрагент: Розничный покупатель   '
		И элемент формы с именем "DecorationGroupTitleUncollapsedPicture" стал равен 'DecorationGroupTitleUncollapsedPicture'
		И элемент формы с именем "Description" стал равен 'Нажмите для заполнения'
		И элемент формы с именем "ExternalLinkedDocs" стал равен ''
		И элемент формы с именем "InternalLinkedDocs" стал равен ''
		И таблица "ItemList" стала равной:
			| 'N' | 'Номенклатура'             | 'Характеристика'          | 'Заказ на перемещение товаров' | 'Количество' | 'Ед. изм.' | 'Склад'                         | 'Документы-основания'                       | 'Возврат поставщику' | 'Заказ покупателя'                          | 'Перемещение товаров' | 'Реализация товаров и услуг' | 'Заказ на возврат поставщику' |
			| '1' | 'Товар с характеристиками' | 'S/Красный'               | ''                             | '15,000'     | 'шт'       | 'Склад 1 (с контролем остатка)' | 'Заказ покупателя 4 от 03.06.2024 11:18:19' | ''                   | 'Заказ покупателя 4 от 03.06.2024 11:18:19' | ''                    | ''                           | ''                            |
			| '2' | 'Товар без характеристик'  | 'Товар без характеристик' | ''                             | '10,000'     | 'шт'       | 'Склад 1 (с контролем остатка)' | 'Заказ покупателя 4 от 03.06.2024 11:18:19' | ''                   | 'Заказ покупателя 4 от 03.06.2024 11:18:19' | ''                    | ''                           | ''                            |
		
		И элемент формы с именем "LegalName" стал равен 'Розничный покупатель'
		И элемент формы с именем "Number" стал равен '7'
		И элемент формы с именем "Partner" стал равен 'Розничный покупатель'
		И элемент формы с именем "Store" стал равен 'Склад 1 (с контролем остатка)'
		И элемент формы с именем "TransactionType" стал равен 'Продажи'
		И я нажимаю на кнопку с именем 'FormPostAndClose'
		И я закрываю все окна клиентского приложения
Сценарий: Проверка движения документа РасходТовара по регистрам	
	* Окрытие готового документа РаходТовара
		Дано Я открываю навигационную ссылку "e1cib/data/Document.ShipmentConfirmation?ref=8ed200155d02c60011ef2181dbe705ca"
	* Загрузка документа РасходТовара
		И я проверяю или создаю для документа "ShipmentConfirmation" объекты:
			| 'Ref'                                                                           | 'DeletionMark' | 'Number' | 'Date'                | 'Posted' | 'Company'                                                           | 'LegalName'                                                         | 'Partner'                                                          | 'TransactionType'                                 | 'Author'                                                        | 'Branch' | 'Description' |
			| 'e1cib/data/Document.ShipmentConfirmation?ref=8ed200155d02c60011ef2181dbe705ca' | 'False'        | 7        | '03.06.2024 11:18:33' | 'True'   | 'e1cib/data/Catalog.Companies?ref=b762b13668d0905011eb7663e35d7964' | 'e1cib/data/Catalog.Companies?ref=b762b13668d0905011eb767f10805e29' | 'e1cib/data/Catalog.Partners?ref=b762b13668d0905011eb7663e35d7954' | 'Enum.ShipmentConfirmationTransactionTypes.Sales' | 'e1cib/data/Catalog.Users?ref=aa7f120ed92fbced11eb13d7279770c0' | ''       | ''            |

		И я перезаполняю для объекта табличную часть "ItemList":
			| 'Ref'                                                                           | 'Key'                                  | 'ItemKey'                                                          | 'Store'                                                          | 'Unit'                                                          | 'Quantity' | 'ShipmentBasis'                                                       | 'QuantityInBaseUnit' | 'SalesOrder'                                                          | 'SalesInvoice' | 'InventoryTransferOrder' | 'InventoryTransfer' | 'PurchaseReturnOrder' | 'PurchaseReturn' |
			| 'e1cib/data/Document.ShipmentConfirmation?ref=8ed200155d02c60011ef2181dbe705ca' | '66ea1dbc-1349-464d-a102-aca196b20916' | 'e1cib/data/Catalog.ItemKeys?ref=b762b13668d0905011eb76684b9f687e' | 'e1cib/data/Catalog.Stores?ref=b762b13668d0905011eb76684b9f6861' | 'e1cib/data/Catalog.Units?ref=b762b13668d0905011eb76684b9f687b' | 15         | 'e1cib/data/Document.SalesOrder?ref=8ed200155d02c60011ef2181d53b52ac' | 15                   | 'e1cib/data/Document.SalesOrder?ref=8ed200155d02c60011ef2181d53b52ac' | ''             | ''                       | ''                  | ''                    | ''               |
			| 'e1cib/data/Document.ShipmentConfirmation?ref=8ed200155d02c60011ef2181dbe705ca' | '44e70099-b610-4580-85f1-8a520e2a376a' | 'e1cib/data/Catalog.ItemKeys?ref=b762b13668d0905011eb766bf96b2751' | 'e1cib/data/Catalog.Stores?ref=b762b13668d0905011eb76684b9f6861' | 'e1cib/data/Catalog.Units?ref=b762b13668d0905011eb76684b9f687b' | 10         | 'e1cib/data/Document.SalesOrder?ref=8ed200155d02c60011ef2181d53b52ac' | 10                   | 'e1cib/data/Document.SalesOrder?ref=8ed200155d02c60011ef2181d53b52ac' | ''             | ''                       | ''                  | ''                    | ''               |

		И я перезаполняю для объекта табличную часть "RowIDInfo":
			| 'Ref'                                                                           | 'Key'                                  | 'RowID'                                | 'Quantity' | 'Basis'                                                               | 'CurrentStep'                                    | 'NextStep'                                    | 'RowRef'                                                         | 'BasisKey'                             |
			| 'e1cib/data/Document.ShipmentConfirmation?ref=8ed200155d02c60011ef2181dbe705ca' | '66ea1dbc-1349-464d-a102-aca196b20916' | '5cdc80b6-4075-4f3a-8f1f-765aab02a4e0' | 15         | 'e1cib/data/Document.SalesOrder?ref=8ed200155d02c60011ef2181d53b52ac' | 'e1cib/data/Catalog.MovementRules?refName=SI_SC' | 'e1cib/data/Catalog.MovementRules?refName=SI' | 'e1cib/data/Catalog.RowIDs?ref=8ed200155d02c60011ef2181d53b52aa' | '5cdc80b6-4075-4f3a-8f1f-765aab02a4e0' |
			| 'e1cib/data/Document.ShipmentConfirmation?ref=8ed200155d02c60011ef2181dbe705ca' | '44e70099-b610-4580-85f1-8a520e2a376a' | '200e321a-5010-4969-a93c-04818393bcd1' | 10         | 'e1cib/data/Document.SalesOrder?ref=8ed200155d02c60011ef2181d53b52ac' | 'e1cib/data/Catalog.MovementRules?refName=SI_SC' | 'e1cib/data/Catalog.MovementRules?refName=SI' | 'e1cib/data/Catalog.RowIDs?ref=8ed200155d02c60011ef2181d53b52ab' | '200e321a-5010-4969-a93c-04818393bcd1' |
	* Проверка проведения документа РасходТовара
	
		И Я открываю навигационную ссылку "e1cib/list/Document.ShipmentConfirmation"
		Тогда таблица "List" стала равной:
			| 'Номер' | 'Организация'            |
			| '1'     | 'Собственная компания 1' |
			| '2'     | 'Собственная компания 1' |
			| '3'     | 'Собственная компания 1' |
			| '4'     | 'Собственная компания 1' |
			| '5'     | 'Собственная компания 1' |
			| '6'     | 'Собственная компания 1' |
			| '7'     | 'Собственная компания 1' |
		Когда открылось окно 'Расходные товарные накладные'
		И в таблице "List" я выделяю все строки
		И в таблице "List" я нажимаю на кнопку с именем 'ListContextMenuPost'
		Тогда не появилось окно предупреждения системы
		И я закрываю все окна клиентского приложения
			
	* Проверка движения документа РасходТовара по регистрам
		Дано Я открываю навигационную ссылку "e1cib/data/Document.ShipmentConfirmation?ref=8ed200155d02c60011ef2181dbe705ca"
		Когда открылось окно 'Расходная товарная накладная * от *'
		И я нажимаю на кнопку с именем 'FormReportDocumentRegistrationsReportRegistrationsReport'
		И я нажимаю на кнопку с именем 'GenerateReport'
		Тогда табличный документ "ResultTable" равен:
			| 'Расходная товарная накладная 7 от 03.06.2024 11:18:33'         | ''                                     | ''                    | ''                    | ''                                     | ''                                                      | ''                                                      | ''                                                      | ''                                          | ''                                     | ''                                          | ''                        |
			| 'Движения документа по регистрам'                               | ''                                     | ''                    | ''                    | ''                                     | ''                                                      | ''                                                      | ''                                                      | ''                                          | ''                                     | ''                                          | ''                        |
			| 'Регистр  "R2011 Отгрузка товаров по заказам покупателей"'      | ''                                     | ''                    | ''                    | ''                                     | ''                                                      | ''                                                      | ''                                                      | ''                                          | ''                                     | ''                                          | ''                        |
			| ''                                                              | 'Record type'                          | 'Period'              | 'Resources'           | 'Dimensions'                           | ''                                                      | ''                                                      | ''                                                      | ''                                          | ''                                     | ''                                          | ''                        |
			| ''                                                              | ''                                     | ''                    | 'Количество'          | 'Организация'                          | 'Структурное подразделение'                             | 'Заказ'                                                 | 'Характеристика'                                        | ''                                          | ''                                     | ''                                          | ''                        |
			| ''                                                              | 'Расход'                               | '03.06.2024 11:18:33' | '10'                  | 'Собственная компания 1'               | ''                                                      | 'Заказ покупателя 4 от 03.06.2024 11:18:19'             | 'Товар без характеристик'                               | ''                                          | ''                                     | ''                                          | ''                        |
			| ''                                                              | 'Расход'                               | '03.06.2024 11:18:33' | '15'                  | 'Собственная компания 1'               | ''                                                      | 'Заказ покупателя 4 от 03.06.2024 11:18:19'             | 'S/Красный'                                             | ''                                          | ''                                     | ''                                          | ''                        |
			| ''                                                              | ''                                     | ''                    | ''                    | ''                                     | ''                                                      | ''                                                      | ''                                                      | ''                                          | ''                                     | ''                                          | ''                        |
			| 'Регистр  "R2013 Обособленное обеспечение заказов покупателей"' | ''                                     | ''                    | ''                    | ''                                     | ''                                                      | ''                                                      | ''                                                      | ''                                          | ''                                     | ''                                          | ''                        |
			| ''                                                              | 'Period'                               | 'Resources'           | ''                    | ''                                     | ''                                                      | ''                                                      | ''                                                      | 'Dimensions'                                | ''                                     | ''                                          | ''                        |
			| ''                                                              | ''                                     | 'В заказе покупателя' | 'В заказе поставщику' | 'В поступлении товаров'                | 'В приходном ордере'                                    | 'В расходном ордере'                                    | 'В реализации товаров'                                  | 'Организация'                               | 'Структурное подразделение'            | 'Заказ'                                     | 'Характеристика'          |
			| ''                                                              | '03.06.2024 11:18:33'                  | ''                    | ''                    | ''                                     | ''                                                      | '10'                                                    | ''                                                      | 'Собственная компания 1'                    | ''                                     | 'Заказ покупателя 4 от 03.06.2024 11:18:19' | 'Товар без характеристик' |
			| ''                                                              | '03.06.2024 11:18:33'                  | ''                    | ''                    | ''                                     | ''                                                      | '15'                                                    | ''                                                      | 'Собственная компания 1'                    | ''                                     | 'Заказ покупателя 4 от 03.06.2024 11:18:19' | 'S/Красный'               |
			| ''                                                              | ''                                     | ''                    | ''                    | ''                                     | ''                                                      | ''                                                      | ''                                                      | ''                                          | ''                                     | ''                                          | ''                        |
			| 'Регистр  "R2031 Закрытие отгрузок реализациями товаров"'       | ''                                     | ''                    | ''                    | ''                                     | ''                                                      | ''                                                      | ''                                                      | ''                                          | ''                                     | ''                                          | ''                        |
			| ''                                                              | 'Record type'                          | 'Period'              | 'Resources'           | 'Dimensions'                           | ''                                                      | ''                                                      | ''                                                      | ''                                          | ''                                     | ''                                          | ''                        |
			| ''                                                              | ''                                     | ''                    | 'Количество'          | 'Организация'                          | 'Структурное подразделение'                             | 'Склад'                                                 | 'Документ основание'                                    | 'Характеристика'                            | ''                                     | ''                                          | ''                        |
			| ''                                                              | 'Приход'                               | '03.06.2024 11:18:33' | '10'                  | 'Собственная компания 1'               | ''                                                      | 'Склад 1 (с контролем остатка)'                         | 'Расходная товарная накладная 7 от 03.06.2024 11:18:33' | 'Товар без характеристик'                   | ''                                     | ''                                          | ''                        |
			| ''                                                              | 'Приход'                               | '03.06.2024 11:18:33' | '15'                  | 'Собственная компания 1'               | ''                                                      | 'Склад 1 (с контролем остатка)'                         | 'Расходная товарная накладная 7 от 03.06.2024 11:18:33' | 'S/Красный'                                 | ''                                     | ''                                          | ''                        |
			| ''                                                              | ''                                     | ''                    | ''                    | ''                                     | ''                                                      | ''                                                      | ''                                                      | ''                                          | ''                                     | ''                                          | ''                        |
			| 'Регистр  "R4010 Остатки товара на складах"'                    | ''                                     | ''                    | ''                    | ''                                     | ''                                                      | ''                                                      | ''                                                      | ''                                          | ''                                     | ''                                          | ''                        |
			| ''                                                              | 'Record type'                          | 'Period'              | 'Resources'           | 'Dimensions'                           | ''                                                      | ''                                                      | ''                                                      | ''                                          | ''                                     | ''                                          | ''                        |
			| ''                                                              | ''                                     | ''                    | 'Количество'          | 'Склад'                                | 'Характеристика'                                        | ''                                                      | ''                                                      | ''                                          | ''                                     | ''                                          | ''                        |
			| ''                                                              | 'Расход'                               | '03.06.2024 11:18:33' | '10'                  | 'Склад 1 (с контролем остатка)'        | 'Товар без характеристик'                               | ''                                                      | ''                                                      | ''                                          | ''                                     | ''                                          | ''                        |
			| ''                                                              | 'Расход'                               | '03.06.2024 11:18:33' | '15'                  | 'Склад 1 (с контролем остатка)'        | 'S/Красный'                                             | ''                                                      | ''                                                      | ''                                          | ''                                     | ''                                          | ''                        |
			| ''                                                              | ''                                     | ''                    | ''                    | ''                                     | ''                                                      | ''                                                      | ''                                                      | ''                                          | ''                                     | ''                                          | ''                        |
			| 'Регистр  "R4012 Товары в резерве на складах"'                  | ''                                     | ''                    | ''                    | ''                                     | ''                                                      | ''                                                      | ''                                                      | ''                                          | ''                                     | ''                                          | ''                        |
			| ''                                                              | 'Record type'                          | 'Period'              | 'Resources'           | 'Dimensions'                           | ''                                                      | ''                                                      | ''                                                      | ''                                          | ''                                     | ''                                          | ''                        |
			| ''                                                              | ''                                     | ''                    | 'Количество'          | 'Склад'                                | 'Характеристика'                                        | 'Заказ'                                                 | ''                                                      | ''                                          | ''                                     | ''                                          | ''                        |
			| ''                                                              | 'Расход'                               | '03.06.2024 11:18:33' | '10'                  | 'Склад 1 (с контролем остатка)'        | 'Товар без характеристик'                               | 'Заказ покупателя 4 от 03.06.2024 11:18:19'             | ''                                                      | ''                                          | ''                                     | ''                                          | ''                        |
			| ''                                                              | 'Расход'                               | '03.06.2024 11:18:33' | '15'                  | 'Склад 1 (с контролем остатка)'        | 'S/Красный'                                             | 'Заказ покупателя 4 от 03.06.2024 11:18:19'             | ''                                                      | ''                                          | ''                                     | ''                                          | ''                        |
			| ''                                                              | ''                                     | ''                    | ''                    | ''                                     | ''                                                      | ''                                                      | ''                                                      | ''                                          | ''                                     | ''                                          | ''                        |
			| 'Регистр  "R4032 Товары в пути (к расходу)"'                    | ''                                     | ''                    | ''                    | ''                                     | ''                                                      | ''                                                      | ''                                                      | ''                                          | ''                                     | ''                                          | ''                        |
			| ''                                                              | 'Record type'                          | 'Period'              | 'Resources'           | 'Dimensions'                           | ''                                                      | ''                                                      | ''                                                      | ''                                          | ''                                     | ''                                          | ''                        |
			| ''                                                              | ''                                     | ''                    | 'Количество'          | 'Склад'                                | 'Документ основание'                                    | 'Характеристика'                                        | ''                                                      | ''                                          | ''                                     | ''                                          | ''                        |
			| ''                                                              | 'Расход'                               | '03.06.2024 11:18:33' | '10'                  | 'Склад 1 (с контролем остатка)'        | 'Расходная товарная накладная 7 от 03.06.2024 11:18:33' | 'Товар без характеристик'                               | ''                                                      | ''                                          | ''                                     | ''                                          | ''                        |
			| ''                                                              | 'Расход'                               | '03.06.2024 11:18:33' | '15'                  | 'Склад 1 (с контролем остатка)'        | 'Расходная товарная накладная 7 от 03.06.2024 11:18:33' | 'S/Красный'                                             | ''                                                      | ''                                          | ''                                     | ''                                          | ''                        |
			| ''                                                              | ''                                     | ''                    | ''                    | ''                                     | ''                                                      | ''                                                      | ''                                                      | ''                                          | ''                                     | ''                                          | ''                        |
			| 'Регистр  "T3010S Row ID инфо"'                                 | ''                                     | ''                    | ''                    | ''                                     | ''                                                      | ''                                                      | ''                                                      | ''                                          | ''                                     | ''                                          | ''                        |
			| ''                                                              | 'Resources'                            | ''                    | ''                    | ''                                     | 'Dimensions'                                            | ''                                                      | ''                                                      | ''                                          | ''                                     | ''                                          | ''                        |
			| ''                                                              | 'Ссылка строки'                        | 'Цена'                | 'Валюты'              | 'Ед. изм.'                             | 'Ключ'                                                  | 'ID Строки'                                             | 'Уникальный ID'                                         | 'Документ основания'                        | 'Ключ документа основания'             | ''                                          | ''                        |
			| ''                                                              | '5cdc80b6-4075-4f3a-8f1f-765aab02a4e0' | ''                    | ''                    | 'шт'                                   | '66ea1dbc-1349-464d-a102-aca196b20916'                  | '5cdc80b6-4075-4f3a-8f1f-765aab02a4e0'                  | '0171154d-85ff-4aa5-814a-c046a28fb77a'                  | 'Заказ покупателя 4 от 03.06.2024 11:18:19' | '5cdc80b6-4075-4f3a-8f1f-765aab02a4e0' | ''                                          | ''                        |
			| ''                                                              | '200e321a-5010-4969-a93c-04818393bcd1' | ''                    | ''                    | 'шт'                                   | '44e70099-b610-4580-85f1-8a520e2a376a'                  | '200e321a-5010-4969-a93c-04818393bcd1'                  | '3227fb20-4ae2-4d62-a673-8fc15e089570'                  | 'Заказ покупателя 4 от 03.06.2024 11:18:19' | '200e321a-5010-4969-a93c-04818393bcd1' | ''                                          | ''                        |
			| ''                                                              | ''                                     | ''                    | ''                    | ''                                     | ''                                                      | ''                                                      | ''                                                      | ''                                          | ''                                     | ''                                          | ''                        |
			| 'Регистр  "TM1010B Движения по ID строк"'                       | ''                                     | ''                    | ''                    | ''                                     | ''                                                      | ''                                                      | ''                                                      | ''                                          | ''                                     | ''                                          | ''                        |
			| ''                                                              | 'Record type'                          | 'Period'              | 'Resources'           | 'Dimensions'                           | ''                                                      | ''                                                      | ''                                                      | ''                                          | ''                                     | ''                                          | ''                        |
			| ''                                                              | ''                                     | ''                    | 'Количество'          | 'ID Строки'                            | 'Шаг'                                                   | 'Документ основание'                                    | 'Ссылка строки'                                         | ''                                          | ''                                     | ''                                          | ''                        |
			| ''                                                              | 'Приход'                               | '03.06.2024 11:18:33' | '10'                  | '200e321a-5010-4969-a93c-04818393bcd1' | 'SI'                                                    | 'Расходная товарная накладная 7 от 03.06.2024 11:18:33' | '200e321a-5010-4969-a93c-04818393bcd1'                  | ''                                          | ''                                     | ''                                          | ''                        |
			| ''                                                              | 'Приход'                               | '03.06.2024 11:18:33' | '15'                  | '5cdc80b6-4075-4f3a-8f1f-765aab02a4e0' | 'SI'                                                    | 'Расходная товарная накладная 7 от 03.06.2024 11:18:33' | '5cdc80b6-4075-4f3a-8f1f-765aab02a4e0'                  | ''                                          | ''                                     | ''                                          | ''                        |
			| ''                                                              | 'Расход'                               | '03.06.2024 11:18:33' | '10'                  | '200e321a-5010-4969-a93c-04818393bcd1' | 'SI&SC'                                                 | 'Заказ покупателя 4 от 03.06.2024 11:18:19'             | '200e321a-5010-4969-a93c-04818393bcd1'                  | ''                                          | ''                                     | ''                                          | ''                        |
			| ''                                                              | 'Расход'                               | '03.06.2024 11:18:33' | '15'                  | '5cdc80b6-4075-4f3a-8f1f-765aab02a4e0' | 'SI&SC'                                                 | 'Заказ покупателя 4 от 03.06.2024 11:18:19'             | '5cdc80b6-4075-4f3a-8f1f-765aab02a4e0'                  | ''                                          | ''                                     | ''                                          | ''                        |
		И я закрываю все окна клиентского приложения
		
		
		
	


			
	
		
	



		
		
					
	

	


	
	

	
